A51 MACRO ASSEMBLER  QUESTION5                                                            08/06/2017 10:29:56 PAGE     1


MACRO ASSEMBLER A51 V8.2.5.0
OBJECT MODULE PLACED IN .\Objects\question5.obj
ASSEMBLER INVOKED BY: C:\Keil_v5\C51\BIN\A51.EXE question5.asm SET(SMALL) DEBUG PRINT(.\Listings\question5.lst) OBJECT(.
                      \Objects\question5.obj) EP

LOC  OBJ            LINE     SOURCE

                       1     ; bin2ascii subroutine

0000                   2     org 0h

0000 020100            3     ljmp main

                       4     

0003                   5     bin2ascii:

0003 AA50              6             mov r2,50h ; N

0005 A951              7             mov r1,51h ; Read pointer

0007 A852              8             mov r0,52h ; Write pointer

0009 7BF0              9             mov r3,#0f0h ; Starts the loop by extracting the lower 4-bits

000B 7C30             10             mov r4,#30h ; Upper Nible of ascii numbers

                      11             

000D                  12             loop:

000D E7               13                     mov A,@r1

000E 5B               14                     anl A,r3 ; Upper 4-bits are extracted and lower bits are set to 0

000F 7D04             15                     mov r5,#4

0011                  16                     rotate:

0011 03               17                             rr A

0012 DDFD             18                     djnz r5,rotate

0014 6C               19                     xrl A,r4 ; Lower bits are set to 0110

0015 F6               20                     mov @r0,A 

0016 08               21                     inc r0

0017 EB               22                     mov A,r3

0018 F4               23                     cpl A

0019 57               24                     anl A,@r1 ; Lower 4-bits and rest to 0

001A 6C               25                     xrl A,r4

001B F6               26                     mov @r0,A

001C 08               27                     inc r0

001D 09               28                     inc r1

001E DAED             29             djnz r2,loop

                      30             

                      31             

0020 22               32     ret

                      33     

0100                  34     org 100h

0100                  35     main:

0100 7966             36             mov r1,#66h

0102                  37             random:

0102 77FE             38                     mov @r1,#0feh

0104 09               39                     inc r1

0105 B96AFA           40                     cjne r1, #6ah, random

0108 755004           41                     mov 50h,#4

010B 755166           42                     mov 51h,#66h

010E 755270           43                     mov 52h,#70h

0111 1103             44                     acall bin2ascii

0113 80FE             45     stop: sjmp stop

                      46     end

A51 MACRO ASSEMBLER  QUESTION5                                                            08/06/2017 10:29:56 PAGE     2

SYMBOL TABLE LISTING
------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES

BIN2ASCII. . . . .  C ADDR   0003H   A   
LOOP . . . . . . .  C ADDR   000DH   A   
MAIN . . . . . . .  C ADDR   0100H   A   
RANDOM . . . . . .  C ADDR   0102H   A   
ROTATE . . . . . .  C ADDR   0011H   A   
STOP . . . . . . .  C ADDR   0113H   A   


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
